import telebot
from openai import OpenAI

# ------------------ –í—Å—Ç–∞–≤—å —Å–≤–æ–∏ –∫–ª—é—á–∏ ------------------
TELEGRAM_TOKEN = "8119152091:AAHPdYRULtMEecoJ-TirL9BdgGKHVMobXVA"
OPENAI_API_KEY = "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"
# -------------------------------------------------------

bot = telebot.TeleBot(TELEGRAM_TOKEN)
client = OpenAI(api_key=OPENAI_API_KEY)

@bot.message_handler(content_types=['text'])
def handle_message(message):
    try:
        response = client.chat.completions.create(
            model="gpt-4o-mini",
            messages=[
                {
                    "role": "system",
                    "content": "–¢—ã –∂—ë—Å—Ç–∫–∏–π —Ç—Ä–æ–ª–ª—å-–±–æ—Ç. –û—Ç–≤–µ—á–∞–µ—à—å –¥–µ—Ä–∑–∫–æ, —Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω–æ, —à—É—Ç–ª–∏–≤–æ, –ø–æ–¥–∫–∞–ª—ã–≤–∞–µ—à—å. –ë–µ–∑ —É–≥—Ä–æ–∑ –∏ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–π —Ä–æ–¥–∏—Ç–µ–ª–µ–π."
                },
                {
                    "role": "user",
                    "content": message.text
                }
            ]
        )

        reply = response.choices[0].message.content
        bot.reply_to(message, reply)

    except Exception as e:
        bot.reply_to(message, "–î–∞–∂–µ —Ç—Ä–æ–ª–ª–∏ –∏–Ω–æ–≥–¥–∞ –ª–æ–º–∞—é—Ç—Å—è üòà")

print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
bot.infinity_polling()
